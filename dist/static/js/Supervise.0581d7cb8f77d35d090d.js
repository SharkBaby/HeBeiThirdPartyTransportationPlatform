webpackJsonp([10],{MOaF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("BO1k"),i=a.n(s),r=a("F+jZ"),l=a("L2rX"),n={name:"SuperviseMultiLevelTableComponent",props:["activeName","tabCtntList"],components:{},data:function(){return{searchType:{input:"input",select:"select",checkbox:"checkbox",singleChkbox:"singleChkbox",singleDayPicker:"singleDayPicker",singleDatePicker:"singleDatePicker",fromTodatePicker:"fromTodatePicker",treeCheckbox:"treeCheckbox",fromToTimePickerChange:"fromToTimePickerChange"},columnType:{text:"text",router_link:"router_link"},preSearchType:["ZoneId","UnitId","VehicleId","PlatformId"],selectType:{Year:"Year",Month:"Month",CheckType:"CheckType",DatePicker:"DatePicker"},multiLevelSourceData:this.tabCtntList,multiLevelActiveName:this.activeName,multiLevelActiveIndex:0,currentRow:null,options:[{value:0,label:"已电话通知"},{value:1,label:"电话未接通"},{value:2,label:"未拨打电话"}],callValue:""}},watch:{tabCtntList:function(e){this.multiLevelSourceData=e}},methods:{handleClick:function(e,t){this.multiLevelActiveIndex=e.index,this.$emit("handleCurActiveIndex",this.multiLevelActiveIndex)},rowDblClick:function(e,t){this.$emit("rowDblClick",e)},handleRowClick:function(e,t,a){this.$emit("handleRowClick",e)},handleRowChange:function(e){this.currentRow=e},hanldeCallChange:function(e){var t=this,a="",s="";switch(this.multiLevelActiveIndex){case 0:a=2;break;case 1:a=3;break;case 2:a=10}switch(e.callValue){case 0:s="已电话通知";break;case 1:s="电话未接通";break;case 2:s="未拨打电话"}var i={params:{VehicleID:e.vehicleId,VehicleType:e.vehicleTypeId,CompanyID:e.unitId,ZoneID:e.zoneId,PlatformID:e.platformID,AlarmType:a,AlarmID:e.alarmId,SuperviseDate:e.sDate,SuperviseTime:e.sTime,Level:0,SuperviseType:e.callValue,IsSupervise:1},postUrl:l.b.rootUrl+l.b.MonitorAPI.SaveGOVAlarmSupervise};r.a.axiosPost(i).then(function(e){e.data?t.$message({message:"恭喜你，成功设置为"+s,type:"success"}):t.$message.error("错了哦，设置状态失败")}).catch(function(e){t.$message({type:"warning",message:Object(r.l)(e)})})},handleSuperviseClick:function(e){var t=this;if(""!==e.callValue){var a="";switch(this.multiLevelActiveIndex){case 0:a=2;break;case 1:a=3;break;case 2:a=10}switch(e.callValue){case 0:"已电话通知";break;case 1:"电话未接通";break;case 2:"未拨打电话"}var s={params:{VehicleID:e.vehicleId,VehicleType:e.vehicleType,CompanyID:e.unitId,ZoneID:e.zoneId,PlatformID:e.platformID,AlarmType:a,AlarmID:e.alarmTypeName,SuperviseDate:e.sDate,SuperviseTime:e.sTime,Level:e.levelStr,SuperviseType:e.callValue,IsSupervise:0},postUrl:l.b.rootUrl+l.b.MonitorAPI.SaveGOVAlarmSupervise};r.a.axiosPost(s).then(function(a){if(a.data)switch(t.$message({message:"恭喜你，督办成功并移除该条记录",type:"success"}),t.multiLevelActiveIndex){case"0":t.$store.commit("deleteSuperviseRslt",e.alarmId);break;case"1":t.$store.commit("deleteSuperviseRsltAM",e.alarmId);break;case"2":t.$store.commit("deleteSuperviseRsltOH",e.alarmId)}else t.$message.error("错了哦，督办失败")}).catch(function(e){t.$message({type:"warning",message:Object(r.l)(e)})})}else t.$message({type:"warning",message:"请选择拨打电话行为"})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{staticClass:"supervise-multi-level",on:{"tab-click":e.handleClick},model:{value:e.multiLevelActiveName,callback:function(t){e.multiLevelActiveName=t},expression:"multiLevelActiveName"}},e._l(e.multiLevelSourceData,function(t,s){return a("el-tab-pane",{key:s,attrs:{label:t.tabLabel,name:t.tabName}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"tabCtntItem.loading"}],ref:"singleTable",refInFor:!0,staticClass:"multi-level-table",staticStyle:{width:"100%"},attrs:{data:t.TabCtnt,"highlight-current-row":"","max-height":"420","default-sort":{prop:"date",order:"descending"},"row-class-name":"table-body-row-class-name","header-cell-class-name":"table-cell-class-name"},on:{"current-change":e.handleRowChange,"row-dblclick":e.rowDblClick,"row-click":e.handleRowClick}},[a("el-table-column",{attrs:{fixed:"left",type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"left",label:"操作",align:"center","header-align":"center",width:"270"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"supervise-btn supervise-operation-a",attrs:{href:"#",title:"督办"},on:{click:function(a){e.handleSuperviseClick(t.row)}}}),e._v(" "),a("el-select",{staticClass:"supervise-call",attrs:{placeholder:"请选择拨打电话行为"},on:{change:function(a){e.hanldeCallChange(t.row)}},model:{value:t.row.callValue,callback:function(a){e.$set(t.row,"callValue",a)},expression:"scope.row.callValue"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))]}}])}),e._v(" "),e._l(t.tabHeader,function(t,s){return 0==t.subHeaders.length?a("el-table-column",{key:s,attrs:{prop:t.headerKey,label:t.headerVal,align:"center","header-align":"center",fixed:["alarmStatus","tel"].indexOf(t.headerKey)>=0&&"left"},scopedSlots:e._u([{key:"default",fn:function(s){return[t.columnType===e.columnType.router_link?a("router-link",{staticClass:"table-router-link",attrs:{to:t.router_link}},[e._v(e._s(s.row[t.headerKey]))]):a("p",[e._v(e._s(s.row[t.headerKey]))])]}}])}):t.subHeaders.length>0?a("el-table-column",{attrs:{label:t.labelName,align:"center","header-align":"center"}},e._l(t.subHeaders,function(t,s){return void 0==t.slabelName?a("el-table-column",{key:s,attrs:{prop:t.headerKey,label:t.headerVal,align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[t.columnType===e.columnType.router_link?a("router-link",{staticClass:"table-router-link",attrs:{to:t.router_link}},[e._v(e._s(s.row[t.headerKey]))]):t.columnType===e.columnType.text?a("p",[e._v(e._s(s.row[t.headerKey]))]):e._e()]}}])}):void 0!==t.slabelName?a("el-table-column",{attrs:{label:t.slabelName,align:"center","header-align":"center"}},e._l(t.ssubHeaders,function(t,s){return a("el-table-column",{key:s,attrs:{prop:t.headerKey,label:t.headerVal,align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[t.columnType===e.columnType.router_link?a("router-link",{staticClass:"table-router-link",attrs:{to:t.router_link}},[e._v(e._s(s.row[t.headerKey]))]):a("p",[e._v(e._s(s.row[t.headerKey]))])]}}])})})):e._e()})):e._e()})],2)],1)}))},staticRenderFns:[]};var d=a("VU/8")(n,o,!1,function(e){a("ZMaQ")},null,null).exports,u=a("mywN"),c=a("KXKr"),m={name:"Supervise",components:{MultiLevelTableComponent:d,BaiduMap:u.a},data:function(){return{activeName:"supervise_o_count",activeNameIndex:0,getProviderCheckDetailDataUrl:l.b.rootUrl+l.b.GetProviderCheckDetailData,exportProviderCheckDetailDataUrl:l.b.rootUrl+l.b.ExportProviderCheckDetailData,getHistoryInfoUrl:l.b.rootUrl+l.b.MonitorAPI.GetHistoryInfo,columnType:{text:"text",router_link:"router_link"},providerCheckSourceData:[],countData:[],tabNameObj:{firTab:{tabLabel:"超速",tabLabelNumber:0,tabName:"supervise_o_count",nType:1,ctrlId:"fjbj_cs"},secTab:{tabLabel:"凌晨2-5报警运行",tabLabelNumber:0,tabName:"supervise_a_count",nType:2,ctrlId:"fjbj_lc24bjyx"},thiTab:{tabLabel:"疲劳驾驶",tabLabelNumber:0,tabName:"supervise_f_count",nType:3,ctrlId:"fjbj_pljs"}},tabCtntList:[],baiduMap:{textObj:{title:"",message:""},displayType:"messageBox"},seriesPoints:[],latitude:l.c.latitude,longtitude:l.c.longtitude,overspeedLength:0}},methods:{handleRowClick:function(e){this.latitude=e.eLatitude,this.longtitude=e.eLongtitude,this.baiduMap.displayType="messageBox",this.baiduMap.textObj={title:e.plate,message:"<div class='supervise-msg-box-left'>所属企业：</div><div class='supervise-msg-box-right'>"+e.unitName+"</div><div class='supervise-msg-box-left'>所属接入平台：</div><div class='supervise-msg-box-right'>"+e.platformName+"</div><div class='supervise-msg-box-left'>地址：</div><div class='supervise-msg-box-right'>"+e.bAddress+"</div><div class='supervise-msg-box-left'>速度/限速值：</div><div class='supervise-msg-box-right'>"+e.topSpeed+"/"+e.speedLimit||"0 km/h</div><div class='supervise-msg-box-left'>报警类别：</div><div class='supervise-msg-box-right'>"+e.alarmTypeName+"</div><div class='supervise-msg-box-left'>报警时间：</div><div class='supervise-msg-box-right'>"+e.startTime+"</div>"}},rowDblClick:function(e){this.baiduMap.displayType="historyRoute",console.log(this.baiduMap.displayType),this.getHisotryInfo(e)},getHisotryInfo:function(e){r.q.setItem(l.b.ctrlId,"home_cljg_clnsgj");var t=this,a={VehicleId:e.vehicleId,StartDate:e.sDate,EndDate:e.eDate,StartTime:e.sTime,EndTime:e.eTime};r.a.axiosGet(this.getHistoryInfoUrl,a).then(function(e){var a=e.data;console.log(a);var s=[],r=!0,l=!1,n=void 0;try{for(var o,d=i()(a);!(r=(o=d.next()).done);r=!0){var u=o.value;s.push({latitude:u.latitudeCNV,longitude:u.longitudeCNV})}}catch(e){l=!0,n=e}finally{try{!r&&d.return&&d.return()}finally{if(l)throw n}}t.seriesPoints=s,console.log(t.seriesPoints)}).catch(function(e){t.$message({type:"warning",message:Object(r.l)(e)}),t.tabCtntList[t.activeNameIndex].loading=!1})}},computed:{tabCtntListFinalArr:function(){return[{tabLabel:this.tabNameObj.firTab.tabLabel+"（"+this.$store.state.overspeedLength+"）",tabName:this.tabNameObj.firTab.tabName,ctrlId:this.tabNameObj.firTab.ctrlId,indexNumber:"",nType:this.tabNameObj.firTab.nType,currentPage:1,total:0,loading:!1,btnEvents:[],searchCreteria:[],tabHeader:[{headerKey:"alarmStatus",headerVal:"违章状态",subHeaders:[],columnType:this.columnType.text},{headerKey:"tel",headerVal:"企业联系电话",subHeaders:[],columnType:this.columnType.text},{headerKey:"plate",headerVal:"车牌号",subHeaders:[],columnType:this.columnType.text},{headerKey:"plateColor",headerVal:"车牌颜色",subHeaders:[],columnType:this.columnType.text},{headerKey:"vehicleType",headerVal:"车辆类型",subHeaders:[],columnType:this.columnType.text},{headerKey:"zoneName",headerVal:"所属地区",subHeaders:[],columnType:this.columnType.text},{headerKey:"unitName",headerVal:"所属企业",subHeaders:[],columnType:this.columnType.text},{headerKey:"platformName",headerVal:"所属接入平台",subHeaders:[],columnType:this.columnType.text},{headerKey:"alarmTypeName",headerVal:"报警类型",subHeaders:[],columnType:this.columnType.text},{headerKey:"startTime",headerVal:"报警开始时间",subHeaders:[],columnType:this.columnType.text},{headerKey:"endTime",headerVal:"报警结束时间",subHeaders:[],columnType:this.columnType.text},{headerKey:"bAddress",headerVal:"开始位置",subHeaders:[],columnType:this.columnType.text},{headerKey:"eAddress",headerVal:"结束位置",subHeaders:[],columnType:this.columnType.text},{headerKey:"roadLevel",headerVal:"是否高速",subHeaders:[],columnType:this.columnType.text},{headerKey:"dayType",headerVal:"报警时段",subHeaders:[],columnType:this.columnType.text},{headerKey:"topSpeed",headerVal:"最高速度",subHeaders:[],columnType:this.columnType.text},{headerKey:"overSpeedRate",headerVal:"超速率",subHeaders:[],columnType:this.columnType.text},{headerKey:"speedLimit",headerVal:"限速值",subHeaders:[],columnType:this.columnType.text}],TabCtnt:this.$store.state.superviseRslt.overspeed},{tabLabel:this.tabNameObj.secTab.tabLabel+"（"+this.$store.state.abnormalmoveLength+"）",tabName:this.tabNameObj.secTab.tabName,ctrlId:this.tabNameObj.secTab.ctrlId,indexNumber:"",nType:this.tabNameObj.secTab.nType,currentPage:1,total:0,loading:!1,btnEvents:[],searchCreteria:[],tabHeader:[{headerKey:"alarmStatus",headerVal:"违章状态",subHeaders:[],columnType:this.columnType.text},{headerKey:"tel",headerVal:"企业联系电话",subHeaders:[],columnType:this.columnType.text},{headerKey:"plate",headerVal:"车牌号",subHeaders:[],columnType:this.columnType.text},{headerKey:"plateColor",headerVal:"车牌颜色",subHeaders:[],columnType:this.columnType.text},{headerKey:"vehicleType",headerVal:"车辆类型",subHeaders:[],columnType:this.columnType.text},{headerKey:"zoneName",headerVal:"所属地区",subHeaders:[],columnType:this.columnType.text},{headerKey:"unitName",headerVal:"所属企业",subHeaders:[],columnType:this.columnType.text},{headerKey:"platformName",headerVal:"所属接入平台",subHeaders:[],columnType:this.columnType.text},{headerKey:"alarmTypeName",headerVal:"报警类型",subHeaders:[],columnType:this.columnType.text},{headerKey:"startTime",headerVal:"报警开始时间",subHeaders:[],columnType:this.columnType.text},{headerKey:"endTime",headerVal:"报警结束时间",subHeaders:[],columnType:this.columnType.text},{headerKey:"bAddress",headerVal:"开始位置",subHeaders:[],columnType:this.columnType.text},{headerKey:"eAddress",headerVal:"结束位置",subHeaders:[],columnType:this.columnType.text},{headerKey:"topSpeed",headerVal:"最高速度",subHeaders:[],columnType:this.columnType.text}],TabCtnt:this.$store.state.superviseRslt.abnormalmove},{tabLabel:this.tabNameObj.thiTab.tabLabel+"（"+this.$store.state.over4hourLength+"）",tabName:this.tabNameObj.thiTab.tabName,ctrlId:this.tabNameObj.thiTab.ctrlId,indexNumber:"",nType:this.tabNameObj.thiTab.nType,currentPage:1,total:0,loading:!1,btnEvents:[],searchCreteria:[],tabHeader:[{headerKey:"alarmStatus",headerVal:"违章状态",subHeaders:[],columnType:this.columnType.text},{headerKey:"tel",headerVal:"企业联系电话",subHeaders:[],columnType:this.columnType.text},{headerKey:"plate",headerVal:"车牌号",subHeaders:[],columnType:this.columnType.text},{headerKey:"plateColor",headerVal:"车牌颜色",subHeaders:[],columnType:this.columnType.text},{headerKey:"vehicleType",headerVal:"车辆类型",subHeaders:[],columnType:this.columnType.text},{headerKey:"zoneName",headerVal:"所属地区",subHeaders:[],columnType:this.columnType.text},{headerKey:"unitName",headerVal:"所属企业",subHeaders:[],columnType:this.columnType.text},{headerKey:"platformName",headerVal:"所属接入平台",subHeaders:[],columnType:this.columnType.text},{headerKey:"alarmTypeName",headerVal:"报警类型",subHeaders:[],columnType:this.columnType.text},{headerKey:"startTime",headerVal:"报警开始时间",subHeaders:[],columnType:this.columnType.text},{headerKey:"endTime",headerVal:"报警结束时间",subHeaders:[],columnType:this.columnType.text},{headerKey:"bAddress",headerVal:"开始位置",subHeaders:[],columnType:this.columnType.text},{headerKey:"eAddress",headerVal:"结束位置",subHeaders:[],columnType:this.columnType.text}],TabCtnt:this.$store.state.superviseRslt.over4hour}]},getOverspeedLength:function(){return this.$store.state.overspeedLength},getAbnormalmoveLength:function(){return this.$store.state.abnormalmoveLength},getOver4hourLength:function(){return this.$store.state.over4hourLength}},watch:{getOverspeedLength:function(e){this.overspeedLength=e,document.getElementById("tab-supervise_o_count").innerHTML=this.tabNameObj.firTab.tabLabel+"（"+e+"）"},getAbnormalmoveLength:function(e){this.overspeedLength=e,document.getElementById("tab-supervise_a_count").innerHTML=this.tabNameObj.secTab.tabLabel+"（"+e+"）"},getOver4hourLength:function(e){this.overspeedLength=e,document.getElementById("tab-supervise_f_count").innerHTML=this.tabNameObj.thiTab.tabLabel+"（"+e+"）"}},created:function(){var e=JSON.parse(r.q.getItem("breadNavs"));this.$emit("viewIn",e);var t=JSON.parse(r.q.getItem("accessList")),a=0,s=!0,l=!1,n=void 0;try{for(var o,d=i()(this.tabCtntListFinalArr);!(s=(o=d.next()).done);s=!0){var u=o.value;Object(c.a)(u.ctrlId,t)&&(u.indexNumber=a,this.tabCtntList.push(u),a++)}}catch(e){l=!0,n=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw n}}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"supervise"},[a("el-row",{staticClass:"supervise-center-map"},[a("baidu-map",{attrs:{baiduMap:e.baiduMap,latitude:e.latitude,longtitude:e.longtitude,seriesPoints:e.seriesPoints,tabCtntList:e.tabCtntList[0]}})],1),e._v(" "),a("multi-level-table-component",{staticClass:"supervise-multilevel",attrs:{activeName:e.activeName,tabCtntList:e.tabCtntList},on:{handleRowClick:e.handleRowClick,rowDblClick:e.rowDblClick}})],1)},staticRenderFns:[]};var p=a("VU/8")(m,h,!1,function(e){a("cAte")},"data-v-6a86863d",null);t.default=p.exports},ZMaQ:function(e,t){},cAte:function(e,t){},mywN:function(e,t,a){"use strict";var s=a("BO1k"),i=a.n(s),r=a("d/hZ"),l=a("F+jZ"),n={name:"BaiduMap",props:["baiduMap","latitude","longtitude","seriesPoints","tabCtntList","vehicleData","monitorTrackRslt"],components:{FromToTimePickerComponent:r.a},data:function(){return{latitudeVal:this.latitude,longtitudeVal:this.longtitude,seriesPointsVal:this.seriesPoints,baiduMapVal:this.baiduMap,monitorTrackRsltVal:this.monitorTrackRslt,map:"",isMonitorTracked:!0,historyRouteInfoConfig:{visible:!1,historyBtnEvents:[{iconName:"",btnId:"play",btnName:"播放"}],startTime:{labelName:"",labelId:"startTime",compVal:[new Date((new Date).getTime()-36e5).format("yyyyMMddhhmmss"),(new Date).format("yyyyMMddhhmmss")]}}}},watch:{latitude:function(e){this.latitudeVal=e,this.displayNormalMap()},longtitude:function(e){this.longtitudeVal=e,this.displayNormalMap()},seriesPoints:function(e){this.seriesPointsVal=e,console.log("有新的更新至哦"),this.displayNormalMap()},baiduMap:function(e){this.baiduMapVal=e,this.displayNormalMap()},monitorTrackRslt:function(e){this.monitorTrackRsltVal=e,this.displayNormalMap()}},mounted:function(){this.displayNormalMap()},methods:{displayNormalMap:function(){var e=this;if(Object(l.o)(e.map)&&(e.map=new BMap.Map("divContainer")),"messageBox"===e.baiduMapVal.displayType)if(e.map=new BMap.Map("divContainer"),null!=this.latitude&&null!=this.longtitude){var t=new BMap.Point(this.longtitude,this.latitude),a=new BMap.Marker(t);e.map.addOverlay(a),e.map.centerAndZoom(t,11);var s={width:500,height:200,title:e.baiduMapVal.textObj.title,enableMessage:!0,message:"No Message Here."},r=new BMap.InfoWindow(e.baiduMapVal.textObj.message,s);a.addEventListener("click",function(){e.map.openInfoWindow(r,t)}),38.045474!=this.latitude&&114.502461!=this.longtitude&&e.map.openInfoWindow(r,t)}else e.$message.error("目前还没有该车辆的最新定位");else if("historyRoute"===e.baiduMapVal.displayType){e.map=new BMap.Map("divContainer");var n=e.seriesPointsVal;e.map.enableScrollWheelZoom(),e.map.centerAndZoom(new BMap.Point(n[0].longitude,n[0].latitude),13);var o=[],d=0;this.addMarker(new BMap.Point(n[0].longitude,n[0].latitude),"起点",e.map),this.addMarker(new BMap.Point(n[n.length-1].longitude,n[n.length-1].latitude),"终点",e.map);setInterval(function(){o.push(new BMap.Point(n[d].longitude,n[d].latitude)),d++;var t=new BMap.Polyline(o,{strokeColor:"#009933",strokeWeight:4,strokeStyle:"dashed"});e.map.addOverlay(t)},0)}else if("monitorTrack"===e.baiduMapVal.displayType)if(e.monitorTrackRsltVal.length>0){e.isMonitorTracked&&(e.map.centerAndZoom(new BMap.Point(e.monitorTrackRsltVal[0][0].model.Longitude/1e6,e.monitorTrackRsltVal[0][0].model.Latitude/1e6),11),e.isMonitorTracked=!1);var u=[],c=!0,m=!1,h=void 0;try{for(var p,b=i()(e.monitorTrackRsltVal);!(c=(p=b.next()).done);c=!0){var v=p.value,y=[],T={title:v[0].model.PlateNum+"("+v[0].model.PlateColor+")",message:"<div class='supervise-msg-box-left'>所属企业：</div><div class='supervise-msg-box-right'>"+v[0].model.UnitName+"</div><div class='supervise-msg-box-left'>地址：</div><div class='supervise-msg-box-right'>"+v[0].model.Address+"</div><div class='supervise-msg-box-left'>速度/限速值：</div><div class='supervise-msg-box-right'>"+v[0].model.Speed+"/"+v[0].model.SpeedLimit+" km/h</div><div class='supervise-msg-box-left'>定位时间：</div><div class='supervise-msg-box-right'>"+Object(l.e)(v[0].model.GPSDate)+" "+Object(l.d)(v[0].model.GPSTime)+"</div><div class='supervise-msg-box-left'>接收时间：</div><div class='supervise-msg-box-right'>"+Object(l.e)(v[0].model.RecvDate)+" "+Object(l.d)(v[0].model.RecvTime)+"</div>"};y.push(v[0].model.Longitude/1e6,v[0].model.Latitude/1e6,T),u.push(y)}}catch(e){m=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(m)throw h}}for(var g=0;g<u.length;g++){a=new BMap.Marker(new BMap.Point(u[g][0],u[g][1]));var f=u[g][2];e.map.addOverlay(a),e.addClickHandler(f,a,e.map)}}else{e.map=new BMap.Map("divContainer");var k=new BMap.Point(114.502461,38.045474);e.isMonitorTracked=!0,e.map.centerAndZoom(k,11)}else if(e.map=new BMap.Map("divContainer"),e.tabCtntList.TabCtnt.length>0){e.map.centerAndZoom(new BMap.Point(e.tabCtntList.TabCtnt[0].eLongtitude,e.tabCtntList.TabCtnt[0].eLatitude),11);var x=[],C=!0,I=!1,w=void 0;try{for(var M,V=i()(e.tabCtntList.TabCtnt);!(C=(M=V.next()).done);C=!0){var N=M.value,L=[],_={title:N.plate,message:"<div class='supervise-msg-box-left'>所属企业：</div><div class='supervise-msg-box-right'>"+N.unitName+"</div><div class='supervise-msg-box-left'>所属接入平台：</div><div class='supervise-msg-box-right'>"+N.platformName+"</div><div class='supervise-msg-box-left'>地址：</div><div class='supervise-msg-box-right'>"+N.bAddress+" km/h</div><div class='supervise-msg-box-left'>速度/限速值：</div><div class='supervise-msg-box-right'>"+N.topSpeed/N.speedLimit+"</div><div class='supervise-msg-box-left'>报警类别：</div><div class='supervise-msg-box-right'>"+N.alarmTypeName+"</div><div class='supervise-msg-box-left'>报警时间：</div><div class='supervise-msg-box-right'>"+N.startTime+"</div>"};L.push(N.eLongtitude,N.eLatitude,_),x.push(L)}}catch(e){I=!0,w=e}finally{try{!C&&V.return&&V.return()}finally{if(I)throw w}}for(g=0;g<x.length;g++){a=new BMap.Marker(new BMap.Point(x[g][0],x[g][1])),f=x[g][2];e.map.addOverlay(a),e.addClickHandler(f,a,e.map)}}else{var H=new BMap.Point(114.502461,38.045474);e.map.centerAndZoom(H,11)}e.map.enableScrollWheelZoom(!0)},addClickHandler:function(e,t,a){var s=this;t.addEventListener("click",function(t){s.openInfo(e,a,t)})},openInfo:function(e,t,a){var s=a.target,i=new BMap.Point(s.getPosition().lng,s.getPosition().lat),r={width:530,height:200,title:e.title,enableMessage:!0,message:"No Message Here."},l=new BMap.InfoWindow(e.message,r);t.openInfoWindow(l,i)},addMarker:function(e,t,a){var s=new BMap.Marker(e),i=new BMap.Label(t,{offset:new BMap.Size(20,-10)});s.setLabel(i),a.addOverlay(s)},handleMouseOver:function(e){switch(e){case"historyRoute":this.$emit("handleMouseOver","historyRoute");break;case"monitorTrack":this.$emit("handleMouseOver","monitorTrack")}},handleMouseOut:function(e){switch(e){case"historyRoute":this.$emit("handleMouseOut","historyRoute");break;case"monitorTrack":this.$emit("handleMouseOut","monitorTrack")}},handleAction:function(e){var t={actionType:e,vehicleData:this.vehicleData};switch(e){case"historyRoute":this.historyRouteInfoConfig.visible=!this.historyRouteInfoConfig.visible,this.$emit("handleActionClick",t);break;case"monitorTrack":this.$emit("handleActionClick",t)}},handleBtnClick:function(e){var t=this.historyRouteInfoConfig.startTime.compVal,a={actionType:e,emitData:{VehicleId:this.vehicleData.Id,StartDate:t[0].substr(0,8),EndDate:t[1].substr(0,8),StartTime:parseInt(3600*t[0].substr(8,2))+parseInt(60*t[0].substr(10,2))+parseInt(t[0].substr(12)),EndTime:parseInt(3600*t[1].substr(8,2))+parseInt(60*t[1].substr(10,2))+parseInt(t[1].substr(12))}};this.$emit("handleHistoryAction",a)},fromToTimePickerChange:function(e){this.historyRouteInfoConfig.startTime.compVal=e.compVal}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"baiduMap"},[a("div",{staticClass:"monitor-container",attrs:{id:"divContainer"}}),e._v(" "),a("div",{staticClass:"monitor-top-left"},[e._l(e.baiduMapVal.monitor_top_left,function(t,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"monitorTpLft.isShow"}],key:s,class:t.monitorClass,attrs:{title:t.monitorTitle},on:{click:function(a){e.handleAction(t.actionType)},mouseover:function(a){e.handleMouseOver(t.actionType)},mouseout:function(a){e.handleMouseOut(t.actionType)}}})}),e._v(" "),a("el-popover",{attrs:{placement:"bottom",title:e.baiduMapVal.textObj.title,width:"600",trigger:"manual"},model:{value:e.historyRouteInfoConfig.visible,callback:function(t){e.$set(e.historyRouteInfoConfig,"visible",t)},expression:"historyRouteInfoConfig.visible"}},[a("div",[a("div",{staticClass:"supervise-history-route-left"},[e._v("时间起-时间至：")]),a("div",{staticClass:"supervise-history-route-right"},[a("from-to-time-picker-component",{attrs:{labelName:e.historyRouteInfoConfig.startTime.labelName,compVal:e.historyRouteInfoConfig.startTime.compVal,labelId:e.historyRouteInfoConfig.startTime.labelId},on:{fromToTimePickerChange:e.fromToTimePickerChange}})],1),e._v(" "),a("el-row",{staticClass:"supervise-history-route-button"},e._l(e.historyRouteInfoConfig.historyBtnEvents,function(t,s){return a("el-button",{directives:[{name:"hasAccess",rawName:"v-hasAccess",value:{accessId:t.ctrlId},expression:"{accessId: btnItem.ctrlId}"}],key:s,staticClass:"btn-com",attrs:{type:"primary",icon:t.iconName,disabled:t.isDisabled},on:{click:function(a){e.handleBtnClick(t.btnId)}}},[e._v(e._s(t.btnName))])}))],1)])],2),e._v(" "),a("div",{staticClass:"monitor-bottom-right"},e._l(e.baiduMapVal.monitor_bottom_right,function(e,t){return a("div",{key:t,class:e.monitorDivClass},[a("a",{class:e.monitorAClass,attrs:{href:"#",title:e.monitorTitle}})])})),e._v(" "),a("div",{staticClass:"monitor-right-bottom"},e._l(e.baiduMapVal.monitor_right_bottom,function(e,t){return a("div",{key:t,class:e.monitorDivClass},[a("a",{class:e.monitorAClass,attrs:{href:"#",title:e.monitorTitle}})])}))])},staticRenderFns:[]};var d=a("VU/8")(n,o,!1,function(e){a("urs8")},null,null);t.a=d.exports},urs8:function(e,t){}});
//# sourceMappingURL=Supervise.0581d7cb8f77d35d090d.js.map