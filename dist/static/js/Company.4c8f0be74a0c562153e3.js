webpackJsonp([20],{nOAt:function(e,a){},qhFB:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("BO1k"),r=t.n(n),l=t("HGcE"),s=t("kq1e"),i=t("F+jZ"),o=t("L2rX"),c={name:"Company",components:{MultiLevelNoTabComponent:l.a,UpdateCompanyForm:s.a},data:function(){return{getUnitBaseInfoUrl:o.b.rootUrl+o.b.BaseInfoAPI.GetUnitBaseInfo,postObj:{params:{UnitId:"",Tel:"",Email:""},postUrl:o.b.rootUrl+o.b.BaseInfoAPI.UpdateUnitBaseInfo},columnFullScore:{rwl:5,sxl:10,wxpyl:15,gjwzl:40,sjhgl:30,pjcscs:0,pjpjsc:0},columnType:{text:"text",router_link:"router_link"},vehicleSourceData:[],countData:[],updateCompanyFormVisible:!1,isSelectedRow:!1,formData:[{headerKey:"Tel",headerVal:"联系电话",compVal:""},{headerKey:"Email",headerVal:"电子邮箱",compVal:""}],formTitle:"修改运输企业管理"}},computed:{tabCtntList:function(){return{currentPage:1,total:0,loading:!1,btnEvents:[{iconName:"el-icon-search",btnId:o.b.btnEventsId.search,btnName:"查询",isDisabled:!1,ctrlId:"jbxx_ysqygl_cx"},{iconName:"el-icon-edit",btnId:o.b.btnEventsId.edit,btnName:"修改",isDisabled:!1,ctrlId:"jbxx_ysqygl_xg"}],searchCreteria:[{searchType:"input",labelName:"企业",labelId:o.d.Name,compVal:""},{searchType:"singleChkbox",labelName:"是否已删除",labelId:o.d.Status,compVal:""},{searchType:"input",labelName:"经营许可证号",labelId:o.d.LicenseNumber,compVal:""}],tabHeader:[{headerKey:"sybid",headerVal:"序号",subHeaders:[],columnType:this.columnType.text},{headerKey:"UnitName",headerVal:"企业",subHeaders:[],columnType:this.columnType.text},{headerKey:"OrgCA",headerVal:"组织机构代码",subHeaders:[],columnType:this.columnType.text},{headerKey:"ZoneName",headerVal:"地区",subHeaders:[],columnType:this.columnType.text},{headerKey:"UpUnitName",headerVal:"上级企业",subHeaders:[],columnType:this.columnType.text},{headerKey:"LogicUnitName",headerVal:"运营机构",subHeaders:[],columnType:this.columnType.text},{headerKey:"BsName",headerVal:"行业类型",subHeaders:[],columnType:this.columnType.text},{headerKey:"Bs",headerVal:"经营范围",subHeaders:[],columnType:this.columnType.text},{headerKey:"LicenseNumber",headerVal:"经营许可证号",subHeaders:[],columnType:this.columnType.text},{headerKey:"Begin",headerVal:"经营许可证有效期起",subHeaders:[],columnType:this.columnType.text},{headerKey:"End",headerVal:"经营许可证有效期止",subHeaders:[],columnType:this.columnType.text},{headerKey:"CorpHead",headerVal:"单位法人",subHeaders:[],columnType:this.columnType.text},{headerKey:"Tel",headerVal:"联系电话",subHeaders:[],columnType:this.columnType.text},{headerKey:"Email",headerVal:"电子邮箱",subHeaders:[],columnType:this.columnType.text},{headerKey:"Address",headerVal:"单位地址",subHeaders:[],columnType:this.columnType.text},{headerKey:"GnssCenterName",headerVal:"接入平台",subHeaders:[],columnType:this.columnType.text}],TabCtnt:[]}}},methods:{handleClickSearch:function(e){var a=this;i.q.setItem(o.b.ctrlId,"jbxx_ysqygl_cx"),this.isSelectedRow=!1;var t=a.formPageParams(e.searchCreteria,e.currentPage,e.isSplitPage);a.tabCtntList.loading=!0,a.vehicleSourceData=[],i.a.axiosGet(this.getUnitBaseInfoUrl,t).then(function(e){var t=e.data.DetailList,n=!0,l=!1,s=void 0;try{for(var i,o=r()(t);!(n=(i=o.next()).done);n=!0){var c=i.value;a.vehicleSourceData.push(a.pushSourceData(c))}}catch(e){l=!0,s=e}finally{try{!n&&o.return&&o.return()}finally{if(l)throw s}}a.tabCtntList.TabCtnt=a.vehicleSourceData,a.tabCtntList.total=e.data.CountTotal,a.tabCtntList.loading=!1,a.tabCtntList.btnEvents[1].isDisabled=!1}).catch(function(e){a.$message.error(Object(i.l)(e))})},pushSourceData:function(e){return{sybid:e.sybid,UnitName:e.UnitName,UnitID:e.UnitID,OrgCA:e.OrgCA,ZoneName:e.ZoneName,UpUnitName:e.UpUnitName,LogicUnitName:e.LogicUnitName,BsName:e.BsName,Bs:e.Bs,LicenseNumber:e.LicenseNumber,Begin:e.Begin,End:e.End,CorpHead:e.CorpHead,Tel:e.Tel,Email:e.Email,Address:e.Address,GnssCenterName:e.GnssCenterName}},handleClickExpData:function(e){var a=this;a.tabCtntList.loading=!0;var t=a.formPageParams(e.searchCreteria,e.currentPage,e.isSplitPage);i.a.axiosGet(this.exportCheckManageDataUrl,t).then(function(e){a.downloadServerFile(decodeURIComponent(e.data)),a.tabCtntList.loading=!1}).catch(function(e){a.$message.error(Object(i.l)(e))})},formPageParams:function(e,a,t){var n="",l="",s="",i=!0,c=!1,d=void 0;try{for(var m,u=r()(e);!(i=(m=u.next()).done);i=!0){var h=m.value;switch(h.labelId){case o.d.Status:n=h.compVal;break;case o.d.Name:l=h.compVal;break;case o.d.LicenseNumber:s=h.compVal}}}catch(e){c=!0,d=e}finally{try{!i&&u.return&&u.return()}finally{if(c)throw d}}return{status:n,name:l,licenseNumber:s,pageSize:10,pageIndex:a,isSplitPage:t,readPage:""}},handleCurrentChange:function(e){this.handleClickSearch(e)},downloadServerFile:function(e){var a=document.createElement("a");a.href=e,a.click()},handleEditBtn:function(e){this.isSelectedRow?this.updateCompanyFormVisible=e:this.$message.error("请选择一行数据")},handleRowClick:function(e){this.isSelectedRow=!0,this.postObj.params.UnitId=e.UnitID;var a=!0,t=!1,n=void 0;try{for(var l,s=r()(this.formData);!(a=(l=s.next()).done);a=!0){var i=l.value;"Tel"===i.headerKey?i.compVal=e.Tel:"Email"===i.headerKey&&(i.compVal=e.Email)}}catch(e){t=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(t)throw n}}},handlUpdateForm:function(e){this.updateCompanyFormVisible=e.isVisible;var a=this;if(i.q.setItem(o.b.ctrlId,"jbxx_ysqygl_xg"),"Submit"===e.actionType){var t=!0,n=!1,l=void 0;try{for(var s,c=r()(e.formColumnNames);!(t=(s=c.next()).done);t=!0){var d=s.value;"Tel"===d.headerKey?a.postObj.params.Tel=d.compVal:"Email"===d.headerKey&&(a.postObj.params.Email=d.compVal)}}catch(e){n=!0,l=e}finally{try{!t&&c.return&&c.return()}finally{if(n)throw l}}i.a.axiosPost(a.postObj).then(function(e){e.data?(a.$message({message:"恭喜你，修改信息成功",type:"success"}),a.updateCompanyFormVisible=!1,a.handleClickSearch({currentPage:1,searchCreteria:a.tabCtntList.searchCreteria,isSplitPage:!0}),a.tabCtntList.currentPage=1):this.$message.error("错了哦，修改信息失败")}).catch(function(e){a.$message.error(Object(i.l)(e))})}}},beforeMount:function(){var e=JSON.parse(i.q.getItem("breadNavs"));this.$emit("viewIn",e)}},d={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"company"},[t("multi-level-no-tab-component",{staticClass:"company-multilevel",attrs:{tabCtntList:e.tabCtntList},on:{handleClickSearch:e.handleClickSearch,handleClickExpData:e.handleClickExpData,handleCurrentChange:e.handleCurrentChange,handleEditBtn:e.handleEditBtn,handleRowClick:e.handleRowClick}}),e._v(" "),t("update-company-form",{attrs:{updateCompanyFormVisible:e.updateCompanyFormVisible,formData:e.formData,formTitle:e.formTitle},on:{handlUpdateForm:e.handlUpdateForm}})],1)},staticRenderFns:[]};var m=t("VU/8")(c,d,!1,function(e){t("nOAt")},null,null);a.default=m.exports}});
//# sourceMappingURL=Company.4c8f0be74a0c562153e3.js.map